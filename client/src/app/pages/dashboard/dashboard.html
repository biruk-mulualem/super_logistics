<div id="dashboard_page" class="dashboard-wrapper">
  <app-sidebar></app-sidebar>

  <div class="main">
    <app-header></app-header>

    <div class="dashboard-content">

      <h1 class="dashboard-title">Dashboard</h1>

      <!-- Grid Cards -->
      <div class="dashboard-grid">
    <div class="card payment-status-card">
  <h2>Intransit Payment</h2>
  <div class="status-item full-payment">
    <span class="status-label">Full Payment</span>
    <span class="status-count">33 </span>
  </div>
  <div class="status-item advance-payment">
    <span class="status-label">Advance Payment</span>
    <span class="status-count">22 </span>
  </div>
  <div class="status-item pending-payment">
    <span class="status-label">Pending</span>
    <span class="status-count">4444 </span>
  </div>
</div>


        <div class="card">
          <h4>Intransit Status</h4>
          <h2>no payment</h2>
          <h2>partil payment</h2>
          <h2>full payment</h2>
         
        </div>

        <div class="card">
          <h4>Market Share</h4>
          <div class="market-chart">26M</div>
          <ul class="legend">
            <li><span class="dot blue"></span> Samsung</li>
            <li><span class="dot green"></span> Huawei</li>
            <li><span class="dot gray"></span> Apple</li>
          </ul>
        </div>

        <div class="card weather-card">
          <h4>Weather</h4>
          <div class="weather">
            <div class="icon">‚òÄÔ∏è</div>
            <div class="info">
              <h3>New York City</h3>
              <p>Sunny</p>
              <p>31¬∞C</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Bottom Panels -->
      <div class="dashboard-grid">
        <div class="card sales">
          <h4>Total Sales</h4>
          <canvas id="salesChart"></canvas>
        </div>
        <div class="card sales">
          <h4>Total Sales</h4>
          <canvas id="salesChart"></canvas>
        </div>
        <div class="card sales">
          <h4>Total Sales</h4>
          <canvas id="salesChart"></canvas>
        </div>
      </div>

      <!-- Storage Section -->
      <div class="storage-section">
        <div class="card storage-bar">
          <p>Using Storage <strong>1466 MB</strong> of 2 GB</p>
          <div class="storage-bar-inner">
            <div class="regular" style="width: 45%"></div>
            <div class="system" style="width: 20%"></div>
            <div class="shared" style="width: 10%"></div>
            <div class="free" style="width: 25%"></div>
          </div>
          <div class="legend">
            <span class="dot blue"></span> Regular
            <span class="dot purple"></span> System
            <span class="dot green"></span> Shared
            <span class="dot gray"></span> Free
          </div>
        </div>

        <div class="card storage-warning">
          <h4>Running out of your space?</h4>
          <p>Your storage will be running out soon. Get more space and powerful productivity features.</p>
          <a href="#">Upgrade storage ‚Üí</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Chatbot Trigger Button -->
  <button class="chatbot-toggle" (click)="toggleChat()" aria-label="Toggle chatbot">üí¨</button>

  <!-- Chatbot Window -->
  <div
    class="chatbot-window"
    [class.open]="isChatOpen"
    role="dialog"
    aria-modal="true"
    aria-labelledby="chatbotTitle"
  >
    <div class="chatbot-header">
      <h4 id="chatbotTitle">Logistics Assistant</h4>
      <button class="close-btn" (click)="toggleChat()" aria-label="Close chatbot">‚úñ</button>
    </div>

    <div class="chatbot-body" #chatBody>
      <div
        *ngFor="let msg of messages"
        [class.user]="msg.from === 'user'"
        [class.bot]="msg.from === 'bot'"
        class="chat-message"
      >
        <strong *ngIf="msg.from === 'user'">You:</strong>
        <strong *ngIf="msg.from === 'bot'">Bot:</strong>
        {{ msg.text }}
      </div>

      <!-- Bot Typing Indicator -->
      <div *ngIf="isBotTyping" class="bot-typing">
        <strong>Bot is typing...</strong>
      </div>
    </div>

    <div class="chatbot-input">
      <input
        type="text"
        [(ngModel)]="chatInput"
        (keyup.enter)="sendMessage()"
        placeholder="Ask something..."
        aria-label="Chat input"
      />
      <button
        (click)="sendMessage()"
        aria-label="Send message"
        [disabled]="isSending || !chatInput.trim()"
      >
        ‚û§
      </button>
    </div>
  </div>
</div>
