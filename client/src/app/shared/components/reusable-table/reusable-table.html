<div class="table-section">
    <!-- Top Search and Add Button -->
    <div class="container">
        <input type="text" [(ngModel)]="searchQuery" (input)="onSearch()" class="search-input" placeholder="Search..." />

        <button *ngIf="buttonVisibility.add" class="add-btn" title="Add" (click)="openAddModal()">
            <i class="fas fa-plus"></i>
        </button>
    </div>
    <!-- Table -->
    <div class="table-wrapper">
        <table>
            <thead>
                <tr>
                    <th *ngFor="let header of headers">{{ header.label }}</th>
                    <th *ngIf="buttonVisibility.edit || buttonVisibility.delete || buttonVisibility.detail ">Actions</th>

                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let row of paginatedData">
                    <td *ngFor="let header of headers" [attr.data-label]="header.label">
                        {{ row[header.key] }}

                    </td>
                    <td data-label="Actions">
                        <div class="action-buttons">

                            <!-- Detail button -->
                            <button *ngIf="buttonVisibility.detail" (click)="openDetailModal(row)" class="detail-btn" title="Detail">
                                <i class="fas fa-eye"></i>
                            </button>

                            <!-- Edit button -->
                            <button *ngIf="buttonVisibility.edit" (click)="openEditModal(row)" class="edit-btn" title="Edit">
                                <i class="fas fa-edit"></i>
                            </button>

                            <!-- Payment button -->
                            <button *ngIf="buttonVisibility.payment" (click)="openPaymentModal(row)" class="payment-btn">
                                <i class="fa fa-credit-card"></i>
                            </button>
                            <!-- Delete button -->
                            <button *ngIf="buttonVisibility.delete" (click)="openDeleteModal(row)" class="delete-btn" title="Delete">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    </td>

                </tr>
            </tbody>

        </table>
    </div>
    <!-- Pagination -->
    <div class="pagination">
        <button class="page-btn" (click)="prevPage()" [disabled]="currentPage === 1">
            &lt;
        </button>
        <button class="page-btn" *ngFor="let page of [].constructor(totalPages); let i = index" [class.active]="currentPage === i + 1" (click)="setPage(i + 1)">
            {{ i + 1 }}
        </button>
        <button class="page-btn" (click)="nextPage()" [disabled]="currentPage === totalPages">
            &gt;
        </button>
    </div>
    <ng-container *ngIf="pageType === 'logistics'">
        <!-- EDIT logistics MODAL -->
        <div class="modal" *ngIf="showEditModal" (click)="closeEditModal()">

            <div class="modal-content" (click)="$event.stopPropagation()">
                <h3>Edit Logistics Entry</h3>

                <div class="modal-form">

                    <div class="modal-input-group">
                        <label>Item Description</label>
                        <input [(ngModel)]="editData.itemDescription" placeholder="Enter item description" required />
                    </div>

                    <div class="modal-input-group">
                        <label>Quantity</label>
                        <input type="number" [(ngModel)]="editData.quantity" placeholder="Enter quantity" required />
                    </div>

                    <div class="modal-input-group">
                        <label>UOM</label>
                        <select [(ngModel)]="editData.uom">
                            <option value disabled>Select UOM</option>
                            <option value="mg">mg</option>
                            <option value="g">g</option>
                            <option value="kg">kg</option>
                            <option value="ton">ton</option>
                            <option value="tons">tons</option>
                            <option value="ml">ml</option>
                            <option value="cl">cl</option>
                            <option value="dl">dl</option>
                            <option value="ltr">LTR</option>
                            <option value="m3">cubic meter (m³)</option>
                            <option value="mm">mm</option>
                            <option value="cm">cm</option>
                            <option value="m">m</option>
                            <option value="inch">inch</option>
                            <option value="ft">ft</option>
                            <option value="yd">yd</option>
                            <option value="sqm">square meter (m²)</option>
                            <option value="sqft">square foot (ft²)</option>
                            <option value="pcs">PCS</option>
                            <option value="units">Units</option>
                            <option value="pack">Pack</option>
                            <option value="box">Box</option>
                            <option value="bag">Bag</option>
                            <option value="roll">Roll</option>
                            <option value="rolls">Rolls</option>
                            <option value="sheet">Sheet</option>
                            <option value="sheets">Sheets</option>
                            <option value="bundle">Bundle</option>
                            <option value="set">Set</option>
                            <option value="pair">Pair</option>
                            <option value="coil">Coil</option>
                            <option value="coils">Coils</option>
                            <option value="drum">Drum</option>
                            <option value="can">Can</option>
                            <option value="pallet">Pallet</option>
                            <option value="carton">Carton</option>
                            <option value="barrel">Barrel</option>
                            <option value="container">Container</option>
                            <option value="tray">Tray</option>
                        </select>
                    </div>

                    <div class="modal-input-group">
                        <label>Bill No</label>
                        <input [(ngModel)]="editData.billNo" placeholder="Enter bill number" required />
                    </div>

                    <div class="modal-input-group">
                        <label>Loaded On (No. of Containers)</label>
                        <input type="number" [(ngModel)]="editData.loadedOnfcl" placeholder="Enter number of containers" required />
                    </div>

                    <div class="modal-input-group">
                        <label>Type of Container</label>
                        <select [(ngModel)]="editData.containerType">
                            <option value disabled>Select container</option>
                            <option value="20ft">20FT</option>
                            <option value="40ft">40FT</option>
                            <option value="40ft-hq">40FT-HQ</option>
                        </select>
                    </div>

                    <div class="modal-input-group">
                        <label>Shipper</label>
                        <select [(ngModel)]="editData.shipper">
                            <option value disabled>Select Shipper</option>
                            <option value="CMA-GCM">CMA-GCM</option>
                            <option value="HAPAGLOYD">HAPAGLOYD</option>
                            <option value="MERSK">MERSK</option>
                            <option value="MEDSEA">MEDSEA</option>
                        </select>
                    </div>

                    <div class="modal-input-group">
                        <label>Transitor</label>
                        <select [(ngModel)]="editData.transitor">
                            <option value disabled>Select Transitor</option>
                            <option value="ECO">ECO</option>
                            <option value="AFRICA">AFRICA</option>
                            <option value="SIYAN">SIYAN</option>
                            <option value="CYEN">CYEN</option>
                            <option value="ELITE">ELITE</option>
                            <option value="STM">STM</option>
                        </select>
                    </div>

                    <div class="modal-input-group">
                        <label>Loading Date</label>
                        <input type="date" [(ngModel)]="editData.loadingDate" required />
                    </div>

                    <div class="modal-input-group">
                        <label>DJB Arrived</label>
                        <input type="date" [(ngModel)]="editData.djbArrived" required />
                    </div>

                    <div class="modal-input-group">
                        <label>DJB Departed</label>
                        <input type="date" [(ngModel)]="editData.djbDeparted" required />
                    </div>

                    <div class="modal-input-group">
                        <label>AKK Arrived</label>
                        <input type="date" [(ngModel)]="editData.akkArrived" required />
                    </div>

                    <div class="modal-input-group">
                        <label>SDT Arrived</label>
                        <input type="date" [(ngModel)]="editData.sdtArrived" required />
                    </div>

                    <div class="modal-input-group">
                        <label> Empity Container Left</label>
                        <input type="number" [(ngModel)]="editData.empityContainersLeftUnreturned" required />
                    </div>

                    <!-- Doc Owner -->
                    <div class="modal-input-group">
                        <label>Doc Owner</label>
                        <input [(ngModel)]="editData.docOwner" placeholder="Enter document owner" required />
                    </div>

                    <!-- Truck Waybill -->
                    <div class="modal-input-group">
                        <label>Truck Waybill</label>
                        <input [(ngModel)]="editData.truckWayBill" placeholder="Enter truck waybill number" required />
                    </div>

                    <!-- Doc Sent to DJB -->
                    <div class="modal-input-group">
                        <label>Doc Sent to DJB</label>
                        <input type="date" [(ngModel)]="editData.docSentDjb" required />
                    </div>

                    <!-- Doc Collected -->
                    <div class="modal-input-group">
                        <label>Doc Collected</label>
                        <input type="date" [(ngModel)]="editData.docCollected" required />
                    </div>

                    <!-- Bill Collected -->
                    <div class="modal-input-group">
                        <label>Bill Collected</label>
                        <input type="date" [(ngModel)]="editData.billCollected" required />
                    </div>

                    <!-- Tax Paid -->
                    <div class="modal-input-group">
                        <label>Tax Paid</label>
                        <input type="date" [(ngModel)]="editData.taxPaid" required />
                    </div>

                    <!-- ETA DJB -->
                    <div class="modal-input-group">
                        <label>ETA DJB</label>
                        <input type="date" [(ngModel)]="editData.etadjb" required />
                    </div>

                    <div class="modal-input-group" id="remark-input">
                        <label>Remark</label>
                        <textarea [(ngModel)]="editData.remark" placeholder="Optional notes..." required></textarea>
                    </div>

                </div>

                <div class="modal-buttons">
                    <button (click)="saveEditClick()" class="btn btn-primary">Save
                        Changes</button>
                    <button (click)="closeEditModal()" class="btn btn-secondary">Cancel</button>
                </div>
            </div>
        </div>
        <!-- Logistics Delete Modal -->
        <div class="modal" *ngIf="showDeleteModal" (click)="closeDeleteModal()">
            <div class="modal-content" (click)="$event.stopPropagation()">
                <h3>Confirm Delete</h3>
                <p>Are you sure you want to delete this logistics row?</p>
                <div class="modal-buttons">
                    <button (click)="confirmDeleteClick()">Yes</button>
                    <button (click)="closeDeleteModal()">No</button>
                </div>
            </div>
        </div>

        <!-- Logistics Detail Modal -->
        <div class="modal" *ngIf="showDetailModal" (click)="closeDetailModal()">
            <div class="modal-content" (click)="$event.stopPropagation()">
                <h3>Detail Information</h3>
                <div class="detail-list">

                    <!-- Row 1 -->
                    <div class="detail-row">
                        <div class="detail-item">
                            <span class="label">Djb-Eta:</span>
                            <span class="value">{{ selectedRow?.etadjb }}</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">Djb-Arr:</span>
                            <span class="value">{{ selectedRow?.djbArrived
                                }}</span>
                        </div>
                    </div>

                    <!-- Row 2 -->
                    <div class="detail-row">
                        <div class="detail-item">
                            <span class="label">Doc-Sent-Djb:</span>
                            <span class="value">{{ selectedRow?.docSentDjb
                                }}</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">Doc-Coll:</span>
                            <span class="value">{{ selectedRow?.docCollected
                                }}</span>
                        </div>
                    </div>

                    <!-- Row 3 -->
                    <div class="detail-row">
                        <div class="detail-item">
                            <span class="label">Bill-Coll:</span>
                            <span class="value">{{ selectedRow?.billCollected
                                }}</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">Tax-Paid:</span>
                            <span class="value">{{ selectedRow?.taxPaid
                                }}</span>
                        </div>
                    </div>

                    <!-- Row 4 -->
                    <div class="detail-row">
                        <div class="detail-item">
                            <span class="label">Djb-Departed:</span>
                            <span class="value">{{ selectedRow?.djbDeparted
                                }}</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">Akk-Arr:</span>
                            <span class="value">{{ selectedRow?.akkArrived
                                }}</span>
                        </div>
                    </div>

                    <!-- Row 5 -->
                    <div class="detail-row">
                        <div class="detail-item">
                            <span class="label">Sdt-Arr:</span>
                            <span class="value">{{ selectedRow?.sdtArrived
                                }}</span>
                        </div>
                        <div class="detail-item">
                            <span class="label">Unreturned-Cont:</span>
                            <span class="value">{{
                                selectedRow?.empityContainersLeftUnreturned
                                }}</span>
                        </div>
                    </div>

                    <!-- Single row for Remark -->
                    <div class="detail-row">
                        <div class="detail-item full-width">
                            <span class="label">Remark:</span>
                            <span class="value">{{ selectedRow?.remark }}</span>
                        </div>
                    </div>

                </div>

                <div class="modal-buttons">
                    <button (click)="closeDetailModal()">Close</button>
                </div>
            </div>
        </div>
    </ng-container>
    <ng-container *ngIf="pageType === 'intransit'">
        <!-- Intransit Edit Modal -->
        <div class="modal" *ngIf="showEditModal" (click)="closeEditModal()">
            <div class="modal-content" (click)="$event.stopPropagation()">
                <h3>Edit Intransit Entry</h3>
                <hr>
                <span>
                    Product Detail
                </span>
                <br>
                <div *ngFor="let item of editData.items; let i = index" class="detail-row">

                    <div class="modal-form">
                        <div class="modal-input-group">

                            <label>Item:</label>
                            <input type="text" [(ngModel)]="item.itemDescription" required />

                        </div>
                    </div>

                    <div class="modal-form">
                        <div class="modal-input-group">
                            <label>Quantity:</label>
                            <input type="number" [(ngModel)]="item.quantity" required />
                        </div>

                    </div>
                    <div class="modal-form">
                        <div class="modal-input-group">
                            <label>UOM:</label>
                            <select [(ngModel)]="item.uom" required>
                                <option value="mg">mg</option>
                                <option value="g">g</option>
                                <option value="kg">kg</option>
                                <option value="ton">ton</option>
                                <option value="lb">lb</option>
                                <option value="oz">oz</option>
                                <option value="ml">ml</option>
                                <option value="l">l</option>
                                <option value="pcs">pcs</option>
                                <option value="box">box</option>
                                <option value="roll">roll</option>
                                <option value="pack">pack</option>
                                <option value="dozen">dozen</option>
                                <option value="set">set</option>
                                <option value="bottle">bottle</option>
                                <option value="can">can</option>
                                <option value="bag">bag</option>
                                <option value="sheet">sheet</option>
                                <option value="meter">meter</option>
                                <option value="cm">cm</option>
                                <option value="inch">inch</option>
                                <option value="yard">yard</option>
                                <option value="sqft">sqft</option>
                                <option value="sqm">sqm</option>
                                <option value="gallon">gallon</option>
                                <option value="quart">quart</option>
                                <option value="pint">pint</option>
                                <option value="fluid_oz">fl oz</option>
                                <option value="tube">tube</option>
                                <option value="carton">carton</option>
                                <option value="crate">crate</option>
                                <option value="pail">pail</option>
                                <option value="jar">jar</option>
                                <option value="packaging_unit">packaging
                                    unit</option>
                                <option value="bundle">bundle</option>
                                <option value="lot">lot</option>
                                <option value="pair">pair</option>
                                <option value="reel">reel</option>
                                <option value="sheet_metal">sheet
                                    (metal)</option>
                                <option value="roll_fabric">roll
                                    (fabric)</option>
                                <option value="drum">drum</option>

                            </select>
                        </div>
                    </div>

                    <div class="modal-form">
                        <div class="modal-input-group">
                            <label>U.Price:</label>
                            <input type="number" [(ngModel)]="item.unitPrice" required />
                        </div>

                    </div>

                </div>
                <hr>

                <!-- Editable metadata -->
                <span>
                    Common Data
                </span>
                <br>
                <div class="modal-form">
                    <div class="modal-input-group">
                        <label>Purchase Date</label>
                        <input type="date" [(ngModel)]="editData.purchaseDate" required />
                    </div>
                    <div class="modal-input-group">
                        <label>Purchase Order</label>
                        <input type="text" [(ngModel)]="editData.purchaseOrder" required />
                    </div>
                    <div class="modal-input-group">
                        <label>Purchase Company:</label>
                        <input type="text" [(ngModel)]="editData.purchaseCompany" required />
                    </div>

                </div>
                <br>

                <div class="modal-form">
                    <div class="modal-input-group">
                        <label>Origin</label>
                        <select [(ngModel)]="editData.origin" required>
                            <option value="china">China</option>
                            <option value="india">India</option>
                            <option value="usa">USA</option>
                            <option value="germany">Germany</option>
                            <option value="japan">Japan</option>
                            <option value="south_korea">South Korea</option>
                            <option value="france">France</option>
                            <option value="uk">United Kingdom</option>
                            <option value="italy">Italy</option>
                            <option value="canada">Canada</option>
                            <option value="mexico">Mexico</option>
                            <option value="brazil">Brazil</option>
                            <option value="russia">Russia</option>
                            <option value="turkey">Turkey</option>
                            <option value="australia">Australia</option>
                            <option value="singapore">Singapore</option>
                            <option value="netherlands">Netherlands</option>
                            <option value="belgium">Belgium</option>
                            <option value="switzerland">Switzerland</option>
                            <option value="uae">UAE</option>
                            <option value="thailand">Thailand</option>
                            <option value="vietnam">Vietnam</option>
                            <option value="malaysia">Malaysia</option>
                            <option value="indonesia">Indonesia</option>

                        </select>
                    </div>
                    <div class="modal-input-group">
                        <label>GRN:</label>
                        <input type="text" [(ngModel)]="editData.grn" required />
                    </div>

                    <div class="modal-input-group">
                        <label>Contact Person:</label>
                        <input type="text" [(ngModel)]="editData.contactPerson" required />
                    </div>

                </div>
                <br>
                <div class="modal-form">
                    <div class="modal-input-group full-width">
                        <label>Remark:</label>
                        <textarea [(ngModel)]="editData.remark"></textarea>
                    </div>
                </div>

                <!-- Buttons -->
                <div class="modal-buttons">
                    <button (click)="saveEditClick()" class="btn btn-primary">Save Changes</button>
                    <button (click)="closeEditModal()" class="btn btn-secondary">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Intransit Delete Modal -->
        <div class="modal" *ngIf="showDeleteModal" (click)="closeDeleteModal()">
            <div class="modal-content" (click)="$event.stopPropagation()">
                <h3>Confirm Delete</h3>
                <p>Are you sure you want to delete this intransit row?THIS ACTION CANT'T BE UNDONE!!</p>




                <div class="modal-buttons" style="margin-top: 10px; display: flex; gap: 10px;">
                    <button (click)="confirmDeleteClick()" class="btn btn-primary">Yes</button>
                    <button (click)="closeDeleteModal()" class="btn btn-secondary">No</button>
                </div>

            </div>
        </div>
        <!-- intransit and payment detail -->
        <div class="modal" *ngIf="showDetailModal" (click)="closeDetailModal()">
            <div class="modal-content" (click)="$event.stopPropagation()">
                <h2>Intransit Detail</h2>
                <hr>

                <!-- Product Detail -->
                <span>Product Detail</span>
                <br>
                <div *ngFor="let item of selectedRow?.items" class="detail-row">
                    <div class="detail-item">
                        <span class="label">Item:</span>
                        <span class="value">{{ item.itemDescription }}</span>
                    </div>

                    <div class="detail-item">
                        <span class="label">Quantity:</span>
                        <span class="value">{{ item.quantity }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">Uom:</span>
                        <span class="value">{{ item.uom }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">U.Price:</span>
                        <span class="value">{{ item.unitPrice }}</span>
                    </div>
                </div>

                <br>
                <!-- Common Data -->
                <span>Common Data</span>
                <div class="detail-row">
                    <div class="detail-item">
                        <span class="label">GRN:</span>
                        <span class="value">{{ selectedRow?.grn }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">Purchase Company:</span>
                        <span class="value">{{ selectedRow?.purchaseCompany
                            }}</span>
                    </div>
                </div>

                <div class="detail-row">
                    <div class="detail-item">
                        <span class="label">Origin:</span>
                        <span class="value">{{ selectedRow?.origin }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">Contact Person:</span>
                        <span class="value">{{ selectedRow?.contactPerson
                            }}</span>
                    </div>
                </div>

                <div class="detail-row">
                    <div class="detail-item">
                        <span class="label">Remark:</span>
                        <span class="value">{{ selectedRow?.remark }}</span>
                    </div>

                </div>

                <hr>
                <!-- Payment History -->
                <div class="modal-buttons" style="margin-bottom: 10px;  justify-content: flex-start;">
                    <button class="btn btn-success">

                        <span>Payment Detail</span>
                    </button>
                </div>

                <br>
                <div *ngFor="let payment of paymentTerms" class="detail-row">
                    <div class="detail-item">
                        <span class="label">Date:</span>
                        <span class="value">{{ payment.paidDate }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">Amount:</span>
                        <span class="value">{{ payment.amountPaid }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">Paid By:</span>
                        <span class="value">{{ payment.paidBy }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">Account:</span>
                        <span class="value">{{ payment.accountPaidFrom }}</span>
                    </div>
                </div>

                <div class="modal-buttons" style="margin-top: 10px; display: flex; gap: 10px;">
                    <button (click)="closeDetailModal()" class="btn btn-secondary">Close</button>
                </div>

            </div>
        </div>

        <!-- add  intransit modal -->
        <div class="modal" *ngIf="showAddModal" (click)="closeAddModal()">
            <div class="modal-content" (click)="$event.stopPropagation()">
                <div class="modal-header">
                    <h3>Add Intransit Entry</h3>
                </div>
                <hr>

                <div class="modal-buttons" style="display: flex; gap: 10px; align-items: center;">
                    <button (click)="addItemRow()" class="btn btn-success">+ Add
                        Item</button>
                </div>

                <div *ngFor="let item of addData.items; let i = index" class="item-row">
                    <div class="modal-input-group">
                        <label>Item Description</label>
                        <input type="text" [(ngModel)]="item.itemDescription" />
                    </div>

                    <div class="modal-input-group">
                        <label>UOM</label>
                        <select [(ngModel)]="item.uom">
                            <option value="mg">mg</option>
                            <option value="g">g</option>
                            <option value="kg">kg</option>
                            <option value="ton">ton</option>
                            <option value="lb">lb</option>
                            <option value="oz">oz</option>
                            <option value="ml">ml</option>
                            <option value="l">l</option>
                            <option value="pcs">pcs</option>
                            <option value="box">box</option>
                            <option value="roll">roll</option>
                            <option value="pack">pack</option>
                            <option value="dozen">dozen</option>
                            <option value="set">set</option>
                            <option value="bottle">bottle</option>
                            <option value="can">can</option>
                            <option value="bag">bag</option>
                            <option value="sheet">sheet</option>
                            <option value="meter">meter</option>
                            <option value="cm">cm</option>
                            <option value="inch">inch</option>
                            <option value="yard">yard</option>
                            <option value="sqft">sqft</option>
                            <option value="sqm">sqm</option>
                            <option value="gallon">gallon</option>
                            <option value="quart">quart</option>
                            <option value="pint">pint</option>
                            <option value="fluid_oz">fl oz</option>
                            <option value="tube">tube</option>
                            <option value="carton">carton</option>
                            <option value="crate">crate</option>
                            <option value="pail">pail</option>
                            <option value="jar">jar</option>
                            <option value="packaging_unit">packaging
                                unit</option>
                            <option value="bundle">bundle</option>
                            <option value="lot">lot</option>
                            <option value="pair">pair</option>
                            <option value="reel">reel</option>
                            <option value="sheet_metal">sheet (metal)</option>
                            <option value="roll_fabric">roll (fabric)</option>
                            <option value="drum">drum</option>

                        </select>
                    </div>

                    <div class="modal-input-group">
                        <label>Quantity</label>
                        <input type="number" [(ngModel)]="item.quantity" />
                    </div>

                    <div class="modal-input-group">
                        <label>Unit Price </label>
                        <input type="number" [(ngModel)]="item.unitPrice" />
                    </div>

                    <div class="modal-input-group remove-btn">
                        <button type="button" (click)="removeItem(i)" [disabled]="i === 0">X</button>
                    </div>
                </div>

                <hr>
                <div class="modal-form">
                    <div class="modal-input-group">
                        <label>Purchase Order</label>
                        <input type="text" [(ngModel)]="addData.purchaseOrder" />
                    </div>

                    <div class="modal-input-group">
                        <label>Purchase Date</label>
                        <input type="date" [(ngModel)]="addData.purchaseDate" />
                    </div>

                    <div class="modal-input-group">
                        <label>Origin</label>
                        <select [(ngModel)]="addData.origin">
                            <option value="china">China</option>
                            <option value="india">India</option>
                            <option value="usa">USA</option>
                            <option value="germany">Germany</option>
                            <option value="japan">Japan</option>
                            <option value="south_korea">South Korea</option>
                            <option value="france">France</option>
                            <option value="uk">United Kingdom</option>
                            <option value="italy">Italy</option>
                            <option value="canada">Canada</option>
                            <option value="mexico">Mexico</option>
                            <option value="brazil">Brazil</option>
                            <option value="russia">Russia</option>
                            <option value="turkey">Turkey</option>
                            <option value="australia">Australia</option>
                            <option value="singapore">Singapore</option>
                            <option value="netherlands">Netherlands</option>
                            <option value="belgium">Belgium</option>
                            <option value="switzerland">Switzerland</option>
                            <option value="uae">UAE</option>
                            <option value="thailand">Thailand</option>
                            <option value="vietnam">Vietnam</option>
                            <option value="malaysia">Malaysia</option>
                            <option value="indonesia">Indonesia</option>

                        </select>
                    </div>

                    <div class="modal-input-group">
                        <label>Purchase Company</label>
                        <input type="text" [(ngModel)]="addData.purchaseCompany" />
                    </div>

                    <div class="modal-input-group">
                        <label>Contact Person</label>
                        <input type="text" [(ngModel)]="addData.contactPerson" />
                    </div>

                    <div class="modal-input-group">
                        <label>Remark</label>
                        <textarea [(ngModel)]="addData.remark"></textarea>
                    </div>
                </div>
                <hr>
                <div class="modal-buttons" style="margin-top: 10px; display: flex; gap: 10px;">
                    <button (click)="saveAddClick()" class="btn btn-primary">Save</button>
                    <button (click)="closeAddModal()" class="btn btn-secondary">Cancel</button>
                </div>
            </div>
        </div>

        <!--  add Payment Modal -->
        <div class="modal" *ngIf="showPaymentModal" (click)="closePaymentModal()">
            <div class="modal-content" (click)="$event.stopPropagation()">
                <div class="modal-header">
                    <h3>Add Payment for {{ selectedRowForPayment?.transactionId }}
                    </h3>
                </div>
                <hr>

                <!-- Add Payment Button on top -->
                <div class="modal-buttons" style="margin-bottom: 10px;">
                    <button class="btn btn-success" (click)="addPaymentRow()">+
                        Add Payment</button>
                </div>

                <!-- Payment Rows -->
                <div *ngFor="let payment of paymentTerms; let j = index" class="payment-row" style="display: flex; gap: 10px; align-items: center; margin-bottom: 10px;">
                    <div class="modal-input-group" style="flex: 1">
                        <label>Amount Paid:</label>
                        <input type="number" [(ngModel)]="payment.amountPaid" required />
                    </div>
                    <div class="modal-input-group" style="flex: 1">
                        <label>Paid By:</label>
                        <input type="text" [(ngModel)]="payment.paidBy" required />
                    </div>
                    <div class="modal-input-group" style="flex: 1">
                        <label>Account Paid From:</label>
                        <input type="text" [(ngModel)]="payment.accountPaidFrom" required />
                    </div>
                    <div class="modal-input-group" style="flex: 1">
                        <label>Payment Date:</label>
                        <input type="date" [(ngModel)]="payment.paidDate" required />
                    </div>
                    <div class="modal-buttons">
                        <button class="btn btn-danger" (click)="removePaymentRow(j)" [disabled]="j === 0">X</button>
                    </div>
                </div>

                <hr>

                <!-- Save & Cancel Buttons -->
                <div class="modal-buttons" style="margin-top: 10px; display: flex; gap: 10px;">
                    <button class="btn btn-primary" (click)="submitPayments()">Save</button>
                    <button class="btn btn-secondary" (click)="closePaymentModal()">Cancel</button>
                </div>
            </div>
        </div>
    </ng-container>
    <ng-container *ngIf="pageType === 'cancelledintransithistory'">
        <!-- intransit and payment detail -->
        <div class="modal" *ngIf="showDetailModal" (click)="closeDetailModal()">
            <div class="modal-content" (click)="$event.stopPropagation()">
                <h2>Intransit Detail</h2>
                <hr>

                <!-- Product Detail -->
                <span>Product Detail</span>
                <br>
                <div *ngFor="let item of selectedRow?.items" class="detail-row">
                    <div class="detail-item">
                        <span class="label">Item:</span>
                        <span class="value">{{ item.itemDescription }}</span>
                    </div>

                    <div class="detail-item">
                        <span class="label">Quantity:</span>
                        <span class="value">{{ item.quantity }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">Uom:</span>
                        <span class="value">{{ item.uom }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">U.Price:</span>
                        <span class="value">{{ item.unitPrice }}</span>
                    </div>
                </div>

                <br>
                <!-- Common Data -->
                <span>Common Data</span>
                <div class="detail-row">
                    <div class="detail-item">
                        <span class="label">GRN:</span>
                        <span class="value">{{ selectedRow?.grn }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">Purchase Company:</span>
                        <span class="value">{{ selectedRow?.purchaseCompany
                            }}</span>
                    </div>
                </div>

                <div class="detail-row">
                    <div class="detail-item">
                        <span class="label">Origin:</span>
                        <span class="value">{{ selectedRow?.origin }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">Contact Person:</span>
                        <span class="value">{{ selectedRow?.contactPerson
                            }}</span>
                    </div>
                </div>

                <div class="detail-row">
                    <div class="detail-item">
                        <span class="label">Remark:</span>
                        <span class="value">{{ selectedRow?.remark }}</span>
                    </div>

                </div>

                <hr>
                <!-- Payment History -->
                <div class="modal-buttons" style="margin-bottom: 10px;  justify-content: flex-start;">
                    <button class="btn btn-success">

                        <span>Payment Detail</span>
                    </button>
                </div>

                <br>
                <div *ngFor="let payment of paymentTerms" class="detail-row">
                    <div class="detail-item">
                        <span class="label">Date:</span>
                        <span class="value">{{ payment.paidDate }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">Amount:</span>
                        <span class="value">{{ payment.amountPaid }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">Paid By:</span>
                        <span class="value">{{ payment.paidBy }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">Account:</span>
                        <span class="value">{{ payment.accountPaidFrom }}</span>
                    </div>
                </div>

                <div class="modal-buttons" style="margin-top: 10px; display: flex; gap: 10px;">
                    <button (click)="closeDetailModal()" class="btn btn-secondary">Close</button>
                </div>

            </div>
        </div>
    </ng-container>
    <ng-container *ngIf="pageType === 'doneintransithistory'">
        <!-- intransit and payment detail -->
        <div class="modal" *ngIf="showDetailModal" (click)="closeDetailModal()">
            <div class="modal-content" (click)="$event.stopPropagation()">
                <h2>Intransit Detail</h2>
                <hr>

                <!-- Product Detail -->
                <span>Product Detail</span>
                <br>
                <div *ngFor="let item of selectedRow?.items" class="detail-row">
                    <div class="detail-item">
                        <span class="label">Item:</span>
                        <span class="value">{{ item.itemDescription }}</span>
                    </div>

                    <div class="detail-item">
                        <span class="label">Quantity:</span>
                        <span class="value">{{ item.quantity }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">Uom:</span>
                        <span class="value">{{ item.uom }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">U.Price:</span>
                        <span class="value">{{ item.unitPrice }}</span>
                    </div>
                </div>

                <br>
                <!-- Common Data -->
                <span>Common Data</span>
                <div class="detail-row">
                    <div class="detail-item">
                        <span class="label">GRN:</span>
                        <span class="value">{{ selectedRow?.grn }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">Purchase Company:</span>
                        <span class="value">{{ selectedRow?.purchaseCompany
                            }}</span>
                    </div>
                </div>

                <div class="detail-row">
                    <div class="detail-item">
                        <span class="label">Origin:</span>
                        <span class="value">{{ selectedRow?.origin }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">Contact Person:</span>
                        <span class="value">{{ selectedRow?.contactPerson
                            }}</span>
                    </div>
                </div>

                <div class="detail-row">
                    <div class="detail-item">
                        <span class="label">Remark:</span>
                        <span class="value">{{ selectedRow?.remark }}</span>
                    </div>

                </div>

                <hr>
                <!-- Payment History -->
                <div class="modal-buttons" style="margin-bottom: 10px;  justify-content: flex-start;">
                    <button class="btn btn-success">

                        <span>Payment Detail</span>
                    </button>
                </div>

                <br>
                <div *ngFor="let payment of paymentTerms" class="detail-row">
                    <div class="detail-item">
                        <span class="label">Date:</span>
                        <span class="value">{{ payment.paidDate }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">Amount:</span>
                        <span class="value">{{ payment.amountPaid }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">Paid By:</span>
                        <span class="value">{{ payment.paidBy }}</span>
                    </div>
                    <div class="detail-item">
                        <span class="label">Account:</span>
                        <span class="value">{{ payment.accountPaidFrom }}</span>
                    </div>
                </div>

                <div class="modal-buttons" style="margin-top: 10px; display: flex; gap: 10px;">
                    <button (click)="closeDetailModal()" class="btn btn-secondary">Close</button>
                </div>

            </div>
        </div>
    </ng-container>
</div>